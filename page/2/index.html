<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-技术整理/跨部门沟通" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/技术整理/跨部门沟通/" class="article-date">
  <time datetime="2017-11-28T08:26:16.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>跨部门沟通<br>没必要说自己听过<br>今天这个挺失败的，还不如去听无人车呢</p>
<p>优先级排序<br>业务匹配，对完成自己KPI有效，不需要额外投入<br>带来更多的价值<br>建立关系<br>软性指标</p>
<p>哪些不接的<br>需求不明确<br>个人的<br>口碑不好的</p>
<p>做什么，为什么做，为什么找你做<br>5w2h<br>对他人有兴趣，关注他人，日常中行事变得自然<br>走过人多的地方<br>吃饭和不熟的人吃</p>
<p>和别人建立联系<br>分享，发现，曝光率<br>办事不送礼，送礼不办事</p>
<p>口碑，有干货<br>给后面的人服一下门</p>
<p>时间去找别人<br>考虑对方的成本</p>
<p>争取别人的理解<br>降低别人成本</p>
<p>当时给任务的时候当时就提要求，资源<br>分享 邀约</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/28/技术整理/跨部门沟通/" data-id="cjajd03qo0011dwllxxw1kclr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-共享元素延迟动画" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/共享元素延迟动画/" class="article-date">
  <time datetime="2017-11-28T08:26:16.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>原文链接：<a href="http://blog.csdn.net/k_tiiime/article/details/44702681" target="_blank" rel="noopener">http://blog.csdn.net/k_tiiime/article/details/44702681</a><br>1.如果共享元素存在的 Fragment 的视图层和FragmentTransaction没有被及时执行，框架有可能在共享元素被正确测量大小和布局到屏幕前启动共享元素Transition；<br>2.共享元素是一个高分辨率的图片；<br>3.共享元素依赖于异步的数据加载如果共享元素所需的数据是通过AsyncTask，AsyncQueryHandler,Loader或者其他类似的东西加载；</p>
<p>使用：<br>在 Activity 的onCreate()中调用postponeEnterTransition()方法来暂时阻止启动共享元素 Transition。之后，你需要在共享元素准备好后调用startPostponedEnterTransition来恢复过渡效果。常见的模式是在一个OnPreDrawListener中启动延时 Transition，它会在共享元素测量和布局完毕后被调用；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">postponeEnterTransition();</span><br><span class="line">private void scheduleStartPostponedTransition(final View sharedElement) &#123;</span><br><span class="line">    sharedElement.getViewTreeObserver().addOnPreDrawListener(</span><br><span class="line">        new ViewTreeObserver.OnPreDrawListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public boolean onPreDraw() &#123;</span><br><span class="line">                sharedElement.getViewTreeObserver().removeOnPreDrawListener(this);</span><br><span class="line">                startPostponedEnterTransition();</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>或者：<br>许多应用通过调用FragmentManager#executePendingTransactions()来避开这个问题，这样会强制立即执行FragmentTransactions而不是异步；<br>postponeEnterTransition()和startPostponedEnterTransition()只对 Activity Transition起作用，对Fragment无效；</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/28/共享元素延迟动画/" data-id="cjajd03pk000bdwllb15e73s5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-双重检查加锁的单利模式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/双重检查加锁的单利模式/" class="article-date">
  <time datetime="2017-11-28T08:26:16.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class SingleModel &#123;</span><br><span class="line"></span><br><span class="line">    //饿汉式：如果一定会创建可以这么用，不用就会占内存  </span><br><span class="line">    //private static SingleModel singleModel=new SingleModel(); </span><br><span class="line">    </span><br><span class="line">    private volatile static SingleModel singleModel;</span><br><span class="line"></span><br><span class="line">    //这样外界就不能new了，内部就可以自己控制了</span><br><span class="line">    private SingleModel() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //static Lock lock = new ReentrantLock();</span><br><span class="line">    //这两句和synchronized等效  lock.lock(); lock.unlock();</span><br><span class="line">    //直接加入synchronized会比较耗资源，适合少次调用的情况</span><br><span class="line"></span><br><span class="line">    public static SingleModel getInstance() &#123;</span><br><span class="line">        if (singleModel == null) &#123;</span><br><span class="line">            synchronized (SingleModel.class) &#123;</span><br><span class="line">                if (singleModel == null) &#123;</span><br><span class="line">                    singleModel = new SingleModel();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return singleModel;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/28/双重检查加锁的单利模式/" data-id="cjajd03pl000cdwllr5op9gjm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-去掉边缘阴影" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/去掉边缘阴影/" class="article-date">
  <time datetime="2017-11-28T08:26:16.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>viewpager和scrollview去掉边缘阴影<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:overScrollMode=&quot;never&quot;</span><br></pre></td></tr></table></figure></p>
<p>ListView去掉滚动条，默认线，按下效果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">android:divider=&quot;@null&quot;</span><br><span class="line">android:dividerHeight=&quot;0dp&quot;</span><br><span class="line">android:overScrollMode=&quot;never&quot;</span><br><span class="line">android:scrollbars=&quot;none&quot;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/28/去掉边缘阴影/" data-id="cjajd03pm000ddwllckrokhht" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-商品分类，左边ExpandListView，右边是ListView" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/商品分类，左边ExpandListView，右边是ListView/" class="article-date">
  <time datetime="2017-11-28T08:26:16.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">private int x = 0;</span><br><span class="line">private int lastExpandedGroup = 0;</span><br><span class="line">private int selectedSubClass = 0;</span><br><span class="line"></span><br><span class="line">//点击事件的位置标注</span><br><span class="line">private int curClassId = 20;</span><br><span class="line">private int curGroupClassId = 0;</span><br><span class="line"></span><br><span class="line"> expListView.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener() &#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public boolean onGroupClick(ExpandableListView parent,</span><br><span class="line">                                    View group, int pos, long id) &#123;</span><br><span class="line">            if (!parent.isGroupExpanded(pos)) &#123;</span><br><span class="line">                CategoryBean item = goodsExpListAdapter.getGroup(pos);</span><br><span class="line">                if (item.getHasChildren()) &#123;</span><br><span class="line">                    if (pos != lastExpandedGroup) &#123;</span><br><span class="line">                        int[] loc = new int[2];</span><br><span class="line">                        group.getLocationInWindow(loc);</span><br><span class="line">                        int distance = loc[1] - x;</span><br><span class="line">                        expListView.smoothScrollBy(distance, 1000);</span><br><span class="line">                        lastExpandedGroup = pos;</span><br><span class="line">                    &#125;</span><br><span class="line">                    expListView.expandGroup(pos);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                expListView.collapseGroup(pos);</span><br><span class="line">            &#125;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    expListView.setOnChildClickListener(new ExpandableListView.OnChildClickListener() &#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public boolean onChildClick(ExpandableListView parent,</span><br><span class="line">                                    View child, int groupPosition, int childPosition,</span><br><span class="line">                                    long id) &#123;</span><br><span class="line">            selectedSubClass = childPosition;</span><br><span class="line">            lastExpandedGroup = groupPosition;</span><br><span class="line">            goodsExpListAdapter.notifyDataSetInvalidated();</span><br><span class="line">            CategoryBean item = goodsExpListAdapter.getChild(groupPosition, childPosition);</span><br><span class="line">            curClassId = item.getClassId();</span><br><span class="line">            curGroupClassId = item.getParentClassId();</span><br><span class="line">            className.setText(item.getClassName());</span><br><span class="line">            queryGoodsByClass(true);</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    private void querGoods() &#123;</span><br><span class="line">        goodsExpListAdapter.notifyDataSetChanged();</span><br><span class="line">        //设置首类第一个商品展示</span><br><span class="line">        if (goodsExpListAdapter.getGroupCount() &gt; 0) &#123;</span><br><span class="line">            curGroupClassId = goodsExpListAdapter.getGroup(0).getClassId();</span><br><span class="line">            expListView.expandGroup(0);</span><br><span class="line">            CategoryBean bean = goodsExpListAdapter.getChild(0, 0);</span><br><span class="line">            curClassId = bean.getClassId();</span><br><span class="line">            className.setText(bean.getClassName());</span><br><span class="line">            queryGoodsByClass(true);</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public View getChildView(int groupPosition, int childPosition,</span><br><span class="line">                             boolean isLastChild, View convert, ViewGroup parent) &#123;</span><br><span class="line">        ChildHolder childHolder;</span><br><span class="line">        if (convert == null) &#123;</span><br><span class="line">            childHolder = new ChildHolder();</span><br><span class="line">            convert = LayoutInflater.from(mActivity).inflate(R.layout.it_child,</span><br><span class="line">                    parent, false);</span><br><span class="line">            childHolder.tv = (TextView) convert</span><br><span class="line">                    .findViewById(R.id.gc_sub_categoryname);</span><br><span class="line">            childHolder.iv = (ImageView) convert</span><br><span class="line">                    .findViewById(R.id.indicator);</span><br><span class="line">            convert.setTag(childHolder);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            childHolder = (ChildHolder) convert.getTag();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        CategoryBean subclassEntity = getChild(groupPosition, childPosition);</span><br><span class="line">        childHolder.tv.setText(subclassEntity.getClassName());</span><br><span class="line"></span><br><span class="line">        //todo 这里设置了左边标识</span><br><span class="line">        if (subclassEntity.getParentClassId() == curGroupClassId</span><br><span class="line">                &amp;&amp; selectedSubClass == childPosition) &#123;</span><br><span class="line">            childHolder.iv.setVisibility(View.VISIBLE);</span><br><span class="line">            childHolder.tv.setTextColor(Color.rgb(57, 172, 105));</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            childHolder.iv.setVisibility(View.GONE);</span><br><span class="line">            childHolder.tv.setTextColor(Color.rgb(102, 102, 102));</span><br><span class="line">        &#125;</span><br><span class="line">        return convert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public View getGroupView(int groupPosition, boolean isExpanded,</span><br><span class="line">                             View convertView, ViewGroup parent) &#123;</span><br><span class="line">        //做动画的，group顶到头</span><br><span class="line">        if (x == 0) &#123;</span><br><span class="line">            int[] loc = new int[2];</span><br><span class="line">            expListView.getLocationInWindow(loc);</span><br><span class="line">            x = loc[1];</span><br><span class="line">        &#125;</span><br><span class="line">        GroupHolder groupHolder;</span><br><span class="line">        if (convertView == null) &#123;</span><br><span class="line">            groupHolder = new GroupHolder();</span><br><span class="line">            convertView = LayoutInflater.from(mActivity).inflate(R.layout.it_group, parent, false);</span><br><span class="line">            groupHolder.tv = (TextView) convertView .findViewById(R.id.gc_exp_group_name);</span><br><span class="line">            convertView.setTag(groupHolder);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            groupHolder = (GroupHolder) convertView.getTag();</span><br><span class="line">        &#125;</span><br><span class="line">        CategoryBean categoryBean = getGroup(groupPosition);</span><br><span class="line">        groupHolder.tv.setText(categoryBean.getClassName());</span><br><span class="line">        if (isExpanded) &#123;</span><br><span class="line">            convertView.setBackgroundColor(Color.WHITE);</span><br><span class="line">            groupHolder.tv.setTextColor(Color.rgb(102, 102, 102));</span><br><span class="line">            groupHolder.tv.setSelected(true);</span><br><span class="line">        &#125; else if (curGroupClassId == categoryBean.getClassId()) &#123;</span><br><span class="line">            convertView.setBackgroundColor(Color.WHITE);</span><br><span class="line">            groupHolder.tv.setTextColor(Color.rgb(102, 102, 102));</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            convertView.setBackgroundColor(Color.rgb(242, 242, 242));</span><br><span class="line">            groupHolder.tv.setTextColor(Color.rgb(102, 102, 102));</span><br><span class="line">            groupHolder.tv.setSelected(false);</span><br><span class="line">        &#125;</span><br><span class="line">        return convertView;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/28/商品分类，左边ExpandListView，右边是ListView/" data-id="cjajd03pn000edwlln1r2q973" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-基于AndroidStudio的高效开发流水线" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/基于AndroidStudio的高效开发流水线/" class="article-date">
  <time datetime="2017-11-28T08:26:16.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>你好，我是程序疯子！</p>
<p>作为个人开发者，如何在短期内快速开发出一款APP，或者独立完成一个项目，这需要我们使用一些高效的工具，使用自动化，批处理插件，同时复用代码，甚至形成流水线作业；</p>
<p>从Android开发入手，通过自己的经验和他人的总结，我总结了这篇文章，同时我也要告别过去自己那种杂乱的编码方式，走向高效有速的方式；</p>
<p>以下是我自己总结的一些快速开发的基本原则：</p>
<blockquote>
<p>1.积累自己的库：其实那些第三方的开源库也是自己不断总结优化后发布的，在库里面积累一些常用到的代码，一些工具等等，然后一句话的调用就可以实现一个小型的功能，这个需要长期不断的积累；</p>
<p>2.使用第三方的开源库（侧重于GitHub，技术）：稳定，可扩展，可定制，还有一些细节之处的优化，如Volley，XUtils等等；</p>
<p>3.使用第三方的SDK（侧重第三方软件商，功能）：他可以快速丰满我们的APP，增强用户体验，如自动更新，客服，地图，语音，分享等等；</p>
<p>4.使用插件：插件可以使我们减少编写低级代码，专注于产品核心功能和用户体验，性能优化等等；</p>
<p>5.使用快捷键：常用功能最好自定义热键，还有编辑器的相关个人习惯设置，这些都要在使用前最先设置好，因为他们在后期会发挥你都难以想像的功效；</p>
<p>6.善用设计模式：学习一些设计模式和代码管理方面的知识会让我们如虎添翼，面向接口和善用继承多态可以让我们重用绝大多数的代码，而且代码清晰条理；</p>
</blockquote>
<p>具体到Android开发，我有一些自己的总结，同时还会有一些AndroidStudio具体操作；</p>
<p>####<strong>1.界面控件的绑定</strong><br>把这个工作交给编辑器去做，在AndroidStudio里面安装【Android ButterKnife Zelezny】插件，然后在主项目里添加ButterKnife依赖；</p>
<p>这样在布局XML文件写好之后，在Activity里面的layout上面右键Generate，找到Butterknife，选择需要生成id的控件即可，它可以把include里面的控件也绑定，很强大；</p>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-7962fa3e88125179.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240" alt="项目依赖"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-600af0ef6a858956.gif?imageView2/2/w/1240" alt="Android ButterKnife Zelezny"></p>
<p>####<strong>2.基于json的实体构建</strong><br>其实这一点主要源于我在学习ios过程中发现json解析赋值只需要一句话，很方便；</p>
<p>一般网络请求返回的json数据多为code附加datas，而建实体可能需要花费一定的时间，但是实体是业务的基础，必须构建，字段应该定义为什么类型，这个需要考虑清楚，尤其是涉及到计算的应该考虑String和Number的差别；</p>
<p>这里推荐一个【GsonFormat】插件，他会根据json数据自动生成实体类，包括复杂类型和List嵌套都可以；</p>
<p><strong>使用注意事项</strong>：</p>
<blockquote>
<ul>
<li>可以先对json数据进行选择性的修改，或者对生成后的属性进行选择性的删除；</li>
<li>该插件把JsonArray解析为List，把JsonObject解析为类，内部类使用 static 修饰，在命名上面无法自动识别下划线并将其转为驼峰命名法，这就需要后台的命名符合JavaBean的规范；</li>
</ul>
</blockquote>
<p>安装后在类里面右键Generate，找到GsonFormat，输入json字符串即可生成；</p>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-5561143545b69341.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240" alt="GsonFormat"></p>
<p>####<strong>3.解析json</strong><br>有了上面的实体之后，解析json就简单多了，使用fastjson这个开源库，根据类自动生成；</p>
<p>单个对象使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">object = JSON.parseObject (result, Order.class);</span><br></pre></td></tr></table></figure></p>
<p>列表对象使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">objectList= JSON.parseArray (result, Orders.class);</span><br></pre></td></tr></table></figure></p>
<p><strong>使用注意事项</strong>：</p>
<blockquote>
<p>这个库的使用依赖于实体，一定要符合JavaBean的规范（每一个实体类属性的getter , setter必须写，方法第四个字母必须大写，必须有空的构造函数），否则无法解析，同时变量的命名要和json中的字段保持一致，但是对顺序没有要求，字段的个数可以比json中的少，服务器返回null值不会崩溃，但是用的时候要判断是否为null；</p>
</blockquote>
<p>同时也可以单独的去解析某一个JsonArray，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">JSONObject jsonObject = null;</span><br><span class="line">List&lt;Ene2.HobbyEntity&gt; hobbyEntity= null;</span><br><span class="line">       try</span><br><span class="line">       &#123;    </span><br><span class="line">         jsonObject = new JSONObject(json);</span><br><span class="line">         hobbyEntity = JSON.parseObject(jsonObject.getString(&quot;hobby&quot;), </span><br><span class="line">new TypeReference&lt;List&lt;Ene2.HobbyEntity&gt;&gt;()&#123;&#125;);</span><br><span class="line">         //2种写法都可以</span><br><span class="line">         //hobbyEntity = JSON.parseArray(jsonData.getString(&quot;data&quot;),                                                                    </span><br><span class="line">Ene2.HobbyEntity.class));</span><br><span class="line">       &#125; catch (JSONException e)&#123;    </span><br><span class="line">          e.printStackTrace();</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure></p>
<p>####<strong>4.列表显示</strong><br>安卓开发常见的大列表展示，这里涉及到网络请求和界面编写；<br>对于并发量比较大的但数据量小的网络请求建议使用Volley，他是谷歌提供的，最强的优势在于与Activity生命周期相关联；</p>
<p>其次就是编写Adapter了，这里我自己封装一个万能Adapter，只需继承并添加构造方法同时实现一个抽象方法即可，而且Adapter应该可复用，不光是界面，还有代码，一些小细节的控制可以通过构造函数传来布尔值进行控制；</p>
<p>既然说到Adapter，那也就顺便说一下图片吧，Volley里面提供了一个传入Url的图片组件，当然也有一个第三方的SmartImageView的组件，他们的原理都类似，先从缓存中取，没有再去做网络请求，只需传入url即可；</p>
<blockquote>
<p>这里也要说一下使用万能Adapter和fastjson解析组合使用会产生的一个小问题：<br>在上一节中说到使用fastjson去单独抽取某个字段的List之后，需要给类里面的List<t>赋值，这里不能直接用等于号赋值，因为Adapter传入的对象和JSON解析后的对象引用不一致，有2种解决方法：</t></p>
<ol>
<li>adapter.setData(JSON.parseObject(jsonData.getString(“data”),<br>new TypeReference<list<myaddress>&gt;() {}));<br> 或者adapter.addDatas(……);</list<myaddress></li>
<li>listdatas.addAll(JSON.parseObject(jsonData.getString(“data”),<br>new TypeReference<list<myaddress>&gt;() {}));<br> adapter.notifyDataChangedSet();</list<myaddress></li>
</ol>
</blockquote>
<p>####<strong>5.实体的传递</strong><br>我之前也写了一篇关于<a href="http://www.jianshu.com/p/d0431d47a31e" target="_blank" rel="noopener">Android序列化的文章</a>，Parceble的效率很高，而且我也不喜欢用Java的思想和习惯去写安卓，序列化解决了数据传递的问题，而在安卓里，列表的每一项点击基本上就是跳详情了，需要把实体数据传过来显示，一种是使用PG包，一种是使用【Android Parcelable code generator】插件自动生成序列化代码（推荐第二种）；</p>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-45fa0037a48765c8.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240" alt="Android Parcelable code generator"></p>
<p>使用注意事项：<br>实体类所使用的类也需要实现序列化，同样null值可以传递且和定义顺序无关，但是该插件生成的List会有一个问题，需要手动改一下，以下是自动生成的代码，包含List<t><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//hobby是一个实体列表</span><br><span class="line">private List&lt;HobbyEntity&gt; hobby;</span><br></pre></td></tr></table></figure></t></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">this.hobby = new ArrayList&lt;HobbyEntity&gt;();    </span><br><span class="line">in.readList(this.hobby, List.class.getClassLoader());</span><br></pre></td></tr></table></figure>
<p>需要手动改为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.hobby=in.readArrayList(HobbyEntity.class.getClassLoader());</span><br></pre></td></tr></table></figure></p>
<p>####<strong>6.其他</strong><br>当然了，远远不止这些，GitHub上面的东西太多，用到什么去学什么，其他的诸如数据库这一块有ORM，还有全能的XUtils，可以注解资源文件（如String，Color，Drawable），还有事件分发的EventBus，其他的内存分析工具，异常捕获，百分比布局等等；</p>
<p>####<strong>7.AndroidStudio的一些小技巧</strong><br>这里写的只是一些比较实用的小技巧，更多使用可以参考我的另一篇文章<a href="http://www.jianshu.com/p/23aa20f92d8e" target="_blank" rel="noopener">AndroidStudio</a></p>
<ul>
<li>XML界面：经常写一些重复的属性很无奈吧，昨天无意间发现可以快速提取Style，我兴奋了好久，只需在XXXView的根标签下右击Extract-&gt;Style，选择需要的属性即可，这样一来，其他的同类也都可以复用了；</li>
<li>方法和类的提取：其实和上面的类似，都在Extract里面；</li>
<li>用Preview边写界面边预览；</li>
<li>善用左边的Structure标签，类似ADT的大纲，快速定位方法；</li>
<li>XML和类文件快速跳转：点击代码编辑窗口左上角的标志；</li>
<li>基于模板新建类，如Activity，Fragment，Service，还可以自定义一个模板，同时layout和清单文件也会自动生成；</li>
<li>XML文件的复用，和提取style的操作方式一样，这次是提取layout；</li>
<li>findusage：快速定位到使用这个文件或变量的位置；</li>
<li>analyse how to follow here：分析变量生成的记录；</li>
</ul>
<p>##<strong>其他补充</strong><br> AndroidStudio其他优秀的插件：</p>
<ul>
<li>Android Selectors Chapek：根据资源自动生成相应的selector；<br>在drawable-xdpi上面右键即可生成，但要遵循命名规范：</li>
</ul>
<table>
<thead>
<tr>
<th>File name suffix</th>
<th style="text-align:center">Drawable state     </th>
</tr>
</thead>
<tbody>
<tr>
<td>_normal</td>
<td style="text-align:center">(default state) </td>
</tr>
<tr>
<td>_pressed</td>
<td style="text-align:center">state_pressed   </td>
</tr>
<tr>
<td>_focused</td>
<td style="text-align:center">state_focused    </td>
</tr>
<tr>
<td>_disabled</td>
<td style="text-align:center">state_enabled (false)</td>
</tr>
<tr>
<td>_checked</td>
<td style="text-align:center">state_checked </td>
</tr>
<tr>
<td>_selected</td>
<td style="text-align:center">state_selected  </td>
</tr>
<tr>
<td>_hovered</td>
<td style="text-align:center">state_hovered</td>
</tr>
<tr>
<td>_checkable</td>
<td style="text-align:center">state_checkable</td>
</tr>
<tr>
<td>_activated</td>
<td style="text-align:center">state_activated</td>
</tr>
<tr>
<td>_windowfocused</td>
<td style="text-align:center">state_window_focused</td>
</tr>
</tbody>
</table>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-8395a7f54d0c092f.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240" alt="Android Selector Chapek"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-f45bc8e81130f468.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240" alt="Android Selector Chapek"></p>
<ul>
<li><p>Genymotion：这是起到一个跳转到模拟器的作用，模拟器本身还是得去官网下载安装的，他是最快的安卓模拟器，没有之一，比你的手机还快；</p>
</li>
<li><p>ADB Idea：不用输命令就可以执行adb的一些命令；</p>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-7eb470832765b4f0.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240" alt="ADB Idea"></p>
<ul>
<li>Android Studio Prettify：这个和ButterKnife类似，但他不使用注解，而是自动生成findViewById方法，可以选择是生成全局变量还是局部变量，在知名度上不及ButterKnife，而且include里面的控件也无法生成；<br>同时还有一个AndroidCodeGenerator是可以生成ViewHolder的控件，但是有了万能Adapter之后，我觉得他的作用就少了许多；</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-7fb977a92e94b186.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240" alt="Android Studio Prettify"></p>
<ul>
<li>Codota：<a href="http://www.jianshu.com/p/59b89c26f9e0" target="_blank" rel="noopener">搜索最好的Android 代码</a></li>
</ul>
<p>优秀的第三方SDK：</p>
<ul>
<li><p><a href="http://www.bmob.cn/" target="_blank" rel="noopener">Bomb</a><br>作为移动开发者，不会后台是不是很掣肘，很多功能前端都做不了，Bomb就可以解决这个问题，他相当于一个免费的云存储，在网站后台搭建了一个数据库，我们可以像之前那样去获取数据并解析；</p>
<blockquote>
<p>bomb字段属性要一致，如float，类名和表名要一致；<br>它的序列化是实现了Serializable；</p>
</blockquote>
</li>
<li><p>百度地图<br>定位，导航，全景，地图功能这都有；</p>
</li>
<li><p>聚合数据<br>各种数据资源集合，提供丰富的API；</p>
</li>
</ul>
<p>###<strong>写在最后</strong><br><br></p>
<blockquote>
<p>如果能把这些零散的工具整合起来形成一套生产流水线，那么生产力将会极大的提高，我也做过这方面的测试，测试流程是先从接口文档里面获取json数据，使用GsonFormat构建出实体，并使用Android Parcelable code generator生成序列化代码，在界面里使用Android ButterKnife Zelezny绑定控件，并用fastjson快速解析数据，然后显示到界面上，整个流程中需要人工操作的基本上就是写界面和给界面组件赋值了（其实这里界面和数据也是可以绑定的，但这个框架我还在研究中，暂先不介绍了，其实这也是下篇的内容之一）；</p>
<p>我相信只要能合理使用这些工具和第三方的库，并形成流水线，开发效率一定可以提升至少30%，熟练了甚至可以达到50%；<br>个人开发者一定要善用工具，将自己从低级代码中脱离出来，专注于产品与核心功能，这样才能快速开发出一款APP来；</p>
</blockquote>
<p>###<strong>续集</strong></p>
<p>1.安卓界面多机型适配：</p>
<p>这里使用一个扩展谷歌推的一个<a href="https://github.com/hongyangAndroid/android-percent-support-extend" target="_blank" rel="noopener">百分库</a>做适配：<br>先把默认宽高设为0，然后使用命名空间设置宽高，h代表屏幕高度，w代表屏幕宽度，不写则是相对父容器，这里默认的宽高不写是可以通过编译的，支持图片和ScrollView；<br>在ScrollView中，编写10%h，这个百分比是依赖于屏幕高度的（不包括ActionBar的高度）；<br>支持height，width，margin，minheight，minwidth，maxheight，maxwidth<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">android:layout_width=&quot;0dp&quot; </span><br><span class="line">android:layout_height=&quot;0dp&quot;</span><br><span class="line">app:layout_heightPercent=&quot;50%w&quot; </span><br><span class="line">app:layout_widthPercent=&quot;50%w&quot;</span><br></pre></td></tr></table></figure></p>
<p>2.databinding：这是谷歌推得一个MVVM编码方式，具体可以参考<a href="https://github.com/LyndonChin/MasteringAndroidDataBinding" target="_blank" rel="noopener">databinding库的配置</a></p>
<blockquote>
<p>自定义binding类名<br>include和adapter的使用<br>会根据xml命名自动生成binding文件，不固定<br>实体数据为空不崩溃<br>实体字段写错无法通过编译<br>int类型注意使用String.valueOf()<br>?来判断是否为空   android:text=”@{addr.consigner??addr.address}”<br>xml中的name起名不能用下划线<br>xml优先级比代码高</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/28/基于AndroidStudio的高效开发流水线/" data-id="cjajd03pp000fdwllprm3nxh2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-百度地图" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/百度地图/" class="article-date">
  <time datetime="2017-11-28T08:26:16.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.通过URL调起百度地图客户端<br><a href="http://lbsyun.baidu.com/index.php?title=uri/api/android" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=uri/api/android</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;baidumap://map/navi?query=朝阳门&amp;type=BLK&quot;));intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);startActivity(intent);</span><br></pre></td></tr></table></figure></p>
<p>配置方面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.在AndroidStudio中不出现要调试的Application，需要在gradle中加一句debugger true，然后重新运行；</span><br><span class="line">2.真的没有log就使用命令行吧，adb logcat -v time -s CruiserService &gt;2.txt，这样就把log保存到一个文件里，然后再查找；</span><br><span class="line">3.有的APK手机卸载后再装就怎么也装不上 Android INSTALL_FAILED_UID_CHANGED，那么需要在root的手机去/data/data/删除该包名的文件即可；</span><br><span class="line">4.打开广播开关: adb shell dumpsys activity log br on  </span><br><span class="line">5.打印相关广播的log: adb shell dumpsys activity b</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/28/百度地图/" data-id="cjajd03pq000gdwllreum5y6v" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-复用Fragment的通用Activity" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/复用Fragment的通用Activity/" class="article-date">
  <time datetime="2017-11-28T08:26:16.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public abstract class ContainerActivity extends Activity &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        FragmentManager fm = getFragmentManager();</span><br><span class="line">        fm.beginTransaction().replace(android.R.id.content, getFragment()).commit();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected abstract Fragment getFragment();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/28/复用Fragment的通用Activity/" data-id="cjajd03pr000hdwllugsyz981" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-抓包与安全" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/抓包与安全/" class="article-date">
  <time datetime="2017-11-28T08:26:16.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="一-基本操作："><a href="#一-基本操作：" class="headerlink" title="一.基本操作："></a>一.基本操作：</h4><p>1.fiddler电脑端设置：首先开启远程控制选项，设置完之后要重启软件生效；<br><img src="http://upload-images.jianshu.io/upload_images/202169-c007ff068dd61e20.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开启远程控制选项"></p>
<p>2.手机端设置wifi选项：<br><img src="http://upload-images.jianshu.io/upload_images/202169-81f3fef530f8c00c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="修改网络"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-deb9d6dd7841f594.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="高级设置"></p>
<blockquote>
<p>代理设置选手动，主机名填写电脑ip（使用ipconfig查看），端口写8888（和fiddler里一致）；</p>
</blockquote>
<p>3.现在正常使用手机，就会看到各种网络请求了，如图</p>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-7a94bc7339cd65da.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="fiddler"></p>
<blockquote>
<p>左边主要有以下数据：</p>
<ul>
<li>协议类型：http，ftp……</li>
<li>返回码：200，400，404……</li>
<li>内容类型Content-type：文本（text/html）,图片（image/html）……</li>
</ul>
<p>右边主要有以下数据：</p>
<ul>
<li>原始数据（RAW）：请求链接，post的body字段，header信息；</li>
<li>JSON：返回的json；</li>
<li>ImageView：返回的图片；</li>
</ul>
</blockquote>
<h4 id="二-具体案例："><a href="#二-具体案例：" class="headerlink" title="二.具体案例："></a>二.具体案例：</h4><p><br></p>
<h5 id="案例1：微信红包照片"><a href="#案例1：微信红包照片" class="headerlink" title="案例1：微信红包照片"></a>案例1：微信红包照片</h5><p><br><br>以获取微信红包照片为例，微信红包照片能破解的一个原因是他只在客户端加了一个滤镜，而不是返回了一张模糊的图。打开微信朋友圈，点击一张图片，它开始加载，fiddler里面就有这个请求了，找contentType为image/html可以快速定位到图片，将右边的面板切换为ImageView，就可以看到原图了，这样一张微信红包照片就破解了，是不是很简单呢！</p>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-622ab9b41eda2269.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="微信图"></p>
<p>通过对微信图片抓包的过程，我发现这几点：</p>
<ol>
<li>微信朋友圈用了2套图，一张缩略图和一张大图（节省流量）</li>
<li>图片都是webp格式的文件（节省流量）</li>
<li>下载后的文件是jpg（用户体验）</li>
</ol>
<p><br></p>
<h5 id="案例2：法内律师抓包分析"><a href="#案例2：法内律师抓包分析" class="headerlink" title="案例2：法内律师抓包分析"></a>案例2：法内律师抓包分析</h5><p><br><br>上一个案例我们只是抓取网络包并分析数据，接下来我会用fiddler模拟http请求，来调试程序或对服务器做测试。切换到composer标签，这里可以选择get/post方法，url地址，header和body（格式要写对），填好之后点击excute就可以了，返回200则说明成功；</p>
<p><img src="http://upload-images.jianshu.io/upload_images/202169-0da72f5b407cbee7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="模拟post请求"></p>
<p>fiddler还有一些高级的功能，如抓取https请求，设置过滤器，设置断点等，自行探索吧；<br><br></p>
<h5 id="案例3：时代光华抓包分析"><a href="#案例3：时代光华抓包分析" class="headerlink" title="案例3：时代光华抓包分析"></a>案例3：时代光华抓包分析</h5><p><br><br>抱着学习的心态给云端学习抓个包，尝试刚才的做法，返回500，失败了，它有自己的安全机制，那我就仔细分析了一下他的网络接口设计；<br>他的url请求都是一个html地址，post参数是string，返回值是明文，比如这样的一个典型的接口；<br><a href="http://v4.21tb.com/open/v1/els/microcourse/listMyTodayTasks.html" target="_blank" rel="noopener">http://v4.21tb.com/open/v1/els/microcourse/listMyTodayTasks.html</a></p>
<p>appKey<em>=2EEEA75929C0400396D7E5E133D20405<br>&amp;tamp</em>=1454246053739<br>&amp;sign<em>=00A93D8EA5CB80285D78AC4E4262B09C<br>&amp;session</em>=%22CloudStudy.ccdc4458eaf44521d90f%22</p>
<p>我对他的post字段进行了分析，得出如下结论：</p>
<blockquote>
<p>appkey：身份验证标识，和第三方sdk的类似；<br>tamp时间戳：可以看作是数字签名的一种应用，表明唯一性，服务器接收到之后如果时间相差太远则不执行；<br>sign签名：防止请求被篡改，我初步猜测sign应该是对key和时间戳合成后的字符串做的一个md5签名，这样当我们捕获了他的请求之后更改时间戳，会导致签名不对，而原封不动的使用则会使得时间差距太大，这样就起到了防篡改的目的；<br>session：不清楚</p>
</blockquote>
<p>于是我想只要能获取到签名的具体步骤，就可以伪造http请求，签名方法我该怎么得到，我试着反编译了他的apk，居然没有混淆，所以源代码就彻底暴露了，我一步步跟踪找到了他签名的方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">this.attributes.put(&quot;appKey_&quot;, SdkContext.openServerAppKey);</span><br><span class="line">String str1 = MD5Generator.getHexMD5(SdkContext.openServerAppSecret + &quot;|&quot; + getUri() + &quot;|&quot; + SdkContext.openServerAppSecret).toUpperCase();</span><br><span class="line">this.attributes.put(&quot;sign_&quot;, str1);</span><br><span class="line">this.attributes.put(&quot;timestamp_&quot;, new Date().getTime());</span><br></pre></td></tr></table></figure></p>
<p>就是这几行，分别对应着上文的3个字段，str1就是sign，getUri( )是url的中间那一部分字段，但是他需要密钥openServerAppSecret，密钥就存在SdkContext里面，可是SdkContext这个类没有反编译成功，打不开，应该是用C++写的，到这里基本上就破解不了了，因为这种用key和secret来验证身份的关键就是保证secret不被泄漏；</p>
<p>总结一下他的网络通信设计，是用appkey和appsecret来验证身份，用时间戳和签名来保证唯一和不可篡改，防止拦截，签名用key，url和timetamp共同生成放到表单里面进行传输，整体安全性不错；</p>
<h4 id="三-抓包用途总结："><a href="#三-抓包用途总结：" class="headerlink" title="三.抓包用途总结："></a>三.抓包用途总结：</h4><p>别人的api为我所用：<br>比如想写一个旅游app，自己有个好的想法和一套精美的ui，但就是没有数据，看到某个旅游的app做的不错，就给他抓个包，分析一下，看看他的界面都是访问的哪些接口，获取的返回值都是什么类型，然后建一套一模一样的网络请求，就可以获得相关的数据了，现在应用商店里面充斥着很多这样的app；</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/28/抓包与安全/" data-id="cjajd03ps000idwll6gsm9cyc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-百度地图API" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/百度地图API/" class="article-date">
  <time datetime="2017-11-28T08:26:16.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>下面来聊聊附近的XX需要怎么实现：<br>首先进入程序之后开启定位，定位成功后在地图上显示位置，然后进行检索，把检索出来的结果标注在地图上，点击某个标注可以跳转到详情页，显示一个全景图和路径规划和一些其他的信息；</p>
<p>定位功能的实现：定位成功回调后给地图设置显示的点，同时还可以设置一个缩放<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">// 位置回调接口</span><br><span class="line">BDLocationListener locationListener = new MyLocationListener();</span><br><span class="line">// 位置</span><br><span class="line">BDLocation location;</span><br><span class="line">LocationClient client;</span><br><span class="line"></span><br><span class="line">client = new LocationClient(this);</span><br><span class="line">client.registerLocationListener(locationListener);</span><br><span class="line">LocationClientOption option2 = new LocationClientOption();	</span><br><span class="line">option2.setLocationMode(LocationClientOption.LocationMode.Hight_Accuracy);</span><br><span class="line">// 是否需要打开GPS</span><br><span class="line">// option2.setOpenGps(true);</span><br><span class="line">option2.setCoorType(&quot;bd09ll&quot;);</span><br><span class="line">option2.setScanSpan(60000);</span><br><span class="line">client.setLocOption(option2);</span><br><span class="line"></span><br><span class="line">class MyLocationListener implements BDLocationListener &#123;</span><br><span class="line"></span><br><span class="line">		MapStatus mMapStatus;</span><br><span class="line">		MyLocationData locData;</span><br><span class="line"></span><br><span class="line">		@Override</span><br><span class="line">		public void onReceiveLocation(BDLocation bdLocation) &#123;</span><br><span class="line">			location = bdLocation;		</span><br><span class="line">			// 构造定位数据</span><br><span class="line">			locData = new MyLocationData.Builder()</span><br><span class="line">					// 定位经度</span><br><span class="line">					.accuracy(location.getRadius())</span><br><span class="line">					.direction(location.getDirection())</span><br><span class="line">					.latitude(location.getLatitude())</span><br><span class="line">					.longitude(location.getLongitude()).build();</span><br><span class="line">			// 设置缩放</span><br><span class="line">			mMapStatus = new MapStatus.Builder()</span><br><span class="line">					.target(new LatLng(location.getLatitude(), </span><br><span class="line">					location.getLongitude())).zoom(16).build();</span><br><span class="line">			&#125;</span><br><span class="line">			// 设置定位数据</span><br><span class="line">			mBaiduMap.setMyLocationData(locData);</span><br><span class="line">			MapStatusUpdate mMapStatusUpdate = MapStatusUpdateFactory.newMapStatus(mMapStatus);</span><br><span class="line">			// 改变地图状态</span><br><span class="line">			mBaiduMap.setMapStatus(mMapStatusUpdate);</span><br><span class="line">			//执行搜索</span><br><span class="line">			//search(2000);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<p>检索这一块比较繁琐，主要是感觉文档写的和代码不一致，很困惑，首先我们需要构建数据库，如果自己用后台建立数据库可以，还要自己写一个根据传来的经纬度去查找附近的点的算法，但是百度提供了云存储功能，很简洁，他需要一个csv格式的Excel或者使用网页版建表，我们需要建立这么一个表；</p>
<p>如果数据量比较少，自己试着用，可以在百度云API后台页面进行添加，直接在地图上面选点，添加属性，有几个必填的属性，还有coord_type要填3，意味着采用百度坐标（这个问题时候来使用全景图的时候发现根本不匹配，找坛主解决的）；</p>
<p>如果数据量很多或者需要定制，那么就要自己去构建这么一个表，详细说说这一部分；</p>
<blockquote>
<p>现在假设用户给了我100个地址，只有文字，我要如何建表呢，我之前试了一些批量转的工具，要么是收费的要么是顺序不对，后来直接在程序里面使用百度geo自己做了；</p>
<ul>
<li>首先把这一串文字地址写成一个txt，一行一条，同时每一条最好都以XX市开头，这样更精确， 放到手机上；</li>
<li>写一个方法去读这个txt文件，一次读一行获得一个Arraylist<string>；</string></li>
<li>然后去使用地图geo相关api去解析它，于是我用了一个for循环去请求，只返回了一条，因为一次请求太多了，后来想用一个队列去试试，最后用了定时器做的，每隔1秒去执行一次请求，把返回的经纬度用逗号连接起来组成新的Arraylist<string>，最后把他写入txt文件里面；</string></li>
<li>把文件从手机传到电脑上，复制到excel表格里面，在excel里面检查缺少的数据（如果有需要单独去解析缺少的条目，可以使用百度提供的网站工具），以逗号为标识分列，合成最终的表，导出csv格式后上传，这里也可以自定义或扩展一些其他的业务属性；</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line">//读取txt文件的内容</span><br><span class="line">ArrayList&lt;String&gt; templist = new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">public void 读取文本(String filePath) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        String encoding = &quot;UTF-8&quot;;</span><br><span class="line">        File file = new File(filePath);</span><br><span class="line">        //判断文件是否存在</span><br><span class="line">        if (file.isFile() &amp;&amp; file.exists()) &#123; </span><br><span class="line">            InputStreamReader read = new InputStreamReader(</span><br><span class="line">                    new FileInputStream(file), encoding);</span><br><span class="line">            BufferedReader bufferedReader = new BufferedReader(read);</span><br><span class="line">            String lineTxt = null;</span><br><span class="line"></span><br><span class="line">            while ((lineTxt = bufferedReader.readLine()) != null) &#123;</span><br><span class="line">                templist.add(lineTxt);</span><br><span class="line">                // Log.e(&quot;&quot;, lineTxt);</span><br><span class="line">            &#125;</span><br><span class="line">            read.close();</span><br><span class="line">            Log.e(&quot;&quot;, templist.size() + &quot;&quot;);</span><br><span class="line">            for (int i = 0; i &lt; templist.size(); i++) &#123;</span><br><span class="line">                // Log.e(&quot;&quot;, templist.get(i) + &quot;&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            Log.e(&quot;&quot;, &quot;找不到指定的文件&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; catch (Exception e) &#123;</span><br><span class="line">        Log.e(&quot;&quot;, &quot;读取文件内容出错&quot;);</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">String str;</span><br><span class="line">Timer timer;</span><br><span class="line">StringBuffer b = new StringBuffer();</span><br><span class="line">int q = 0;</span><br><span class="line"></span><br><span class="line">//队列也很好使用，queue.poll();queue.offer();</span><br><span class="line">//Queue&lt;String&gt; queue = new LinkedList&lt;&gt;();</span><br><span class="line">//Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();</span><br><span class="line">//记position需要一个全局的变量</span><br><span class="line"></span><br><span class="line">void 批处理() &#123;</span><br><span class="line">timer = new Timer(true);</span><br><span class="line"></span><br><span class="line">new AsyncTask&lt;Void, Void, Void&gt;() &#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        protected Void doInBackground(Void... voids) &#123;</span><br><span class="line">            //读取txt文件，读到换行符的时候list加一项</span><br><span class="line">            读取文本(Environment.getExternalStorageDirectory().toString() + &quot;/Pictures/&quot; + &quot;h.txt&quot;);</span><br><span class="line">            for (int i = 0; i &lt; templist.size(); i++) &#123;</span><br><span class="line">                Log.e(&quot;&quot;, templist.get(i));</span><br><span class="line">            &#125;</span><br><span class="line">            //定时器这里不是用for循环来做的</span><br><span class="line">            timer.schedule(new TimerTask() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public void run() &#123;</span><br><span class="line">                    str = templist.get(q++);</span><br><span class="line">                    mSearch.geocode(new GeoCodeOption().city(&quot;济宁&quot;).address(str));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, 5000, 1 * 1000);</span><br><span class="line">            //开启服务5秒后启动线程，并且每1秒循环一次</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;.execute();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//回调geo结果，先让类实现接口 implements OnGetGeoCoderResultListener</span><br><span class="line">//给文字获得经纬度，搜索模块，也可去掉地图模块独立使用</span><br><span class="line">GeoCoder mSearch = null;</span><br><span class="line">// 初始化搜索模块，注册事件监听，生命周期销毁</span><br><span class="line">mSearch = GeoCoder.newInstance();</span><br><span class="line">mSearch.setOnGetGeoCodeResultListener(this);</span><br><span class="line">mSearch.destroy();</span><br><span class="line"></span><br><span class="line">//获取到了结果之后存成txt，整理excel</span><br><span class="line">@Override</span><br><span class="line">public void onGetGeoCodeResult(GeoCodeResult result) &#123;</span><br><span class="line">    if (result == null || result.error != SearchResult.ERRORNO.NO_ERROR) &#123;</span><br><span class="line">          Toast.makeText(MapActivity.this, &quot;抱歉，未能找到结果&quot;, Toast.LENGTH_LONG).show();</span><br><span class="line">          return;</span><br><span class="line">    &#125;</span><br><span class="line">    mBaiduMap.clear();</span><br><span class="line">    mBaiduMap.addOverlay(new MarkerOptions().position(result.getLocation())</span><br><span class="line">            .icon(BitmapDescriptorFactory</span><br><span class="line">                    .fromResource(R.mipmap.icon_marka)));</span><br><span class="line">    mBaiduMap.setMapStatus(MapStatusUpdateFactory.newLatLng(result</span><br><span class="line">            .getLocation()));</span><br><span class="line">    b.append(String.format(&quot;纬度：%f   经度：%f&quot;,</span><br><span class="line">              result.getLocation().latitude, result.getLocation().longitude));</span><br><span class="line">    b.append(q + &quot;纬度：&quot; + result.getLocation().latitude + &quot;,   经度：&quot; + result.getLocation().longitude + &quot;\\\\n&quot;);</span><br><span class="line">    //debug开始</span><br><span class="line">    //String strInfo = String.format(&quot;纬度：%f   经度：%f&quot;,</span><br><span class="line">    //result.getLocation().latitude, result.getLocation().longitude);</span><br><span class="line">    //Log.e(&quot;&quot;, String.format(&quot;纬度：%f   经度：%f&quot;,</span><br><span class="line">    //result.getLocation().latitude, result.getLocation().longitude));</span><br><span class="line">    //debug结束</span><br><span class="line">    if (q == templist.size()) &#123;</span><br><span class="line">          timer.cancel();</span><br><span class="line">          保存文本文件(Environment.getExternalStorageDirectory().toString() + &quot;/Pictures/&quot;, &quot;result.txt&quot;, b.toString());</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onGetReverseGeoCodeResult(ReverseGeoCodeResult result) &#123;</span><br><span class="line">      if (result == null || result.error != SearchResult.ERRORNO.NO_ERROR) &#123;</span><br><span class="line">          Toast.makeText(MapActivity.this, &quot;抱歉，未能找到结果&quot;, Toast.LENGTH_LONG).show();</span><br><span class="line">          return;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void 保存文本文件(String path, String filename, String string) &#123;</span><br><span class="line">    // 创建目录</span><br><span class="line">    isFileExistAndCreat(path);</span><br><span class="line">    File targetFile = new File(path + filename);</span><br><span class="line">    OutputStreamWriter osw;</span><br><span class="line">    try &#123;</span><br><span class="line">        // 创建文件</span><br><span class="line">        if (!targetFile.exists()) &#123;</span><br><span class="line">            targetFile.createNewFile();</span><br><span class="line">            osw = new OutputStreamWriter(new FileOutputStream(targetFile), &quot;UTF-8&quot;);</span><br><span class="line">            osw.write(string);</span><br><span class="line">            osw.close();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // 再次写入时不采用拼接的方法,而是重新写</span><br><span class="line">            osw = new OutputStreamWriter(new FileOutputStream(targetFile, false), &quot;UTF-8&quot;);</span><br><span class="line">            osw.write(string);</span><br><span class="line">            osw.flush();</span><br><span class="line">            osw.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; catch (Exception e) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//判断文件是否存在，不存在则创建</span><br><span class="line">public static void isFileExistAndCreat(String filepath) &#123;</span><br><span class="line">    if (isSdcardAvailable()) &#123;</span><br><span class="line">        File file = new File(filepath);</span><br><span class="line">        if (!file.exists()) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                file.createNewFile();</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//检查SD卡是否可用</span><br><span class="line">public static boolean isSdcardAvailable() &#123;</span><br><span class="line">    return Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>云存储搞完了就剩下云检索了，这里首先在<a href="http://lbsyun.baidu.com/datamanager/datamanage" target="_blank" rel="noopener">百度管理后台</a>创建一个服务器应用，获取AK，因为云检索V3版本需要申请服务器的AK才能使用，但我们不需要有服务器；然后就是引入jar包，在application里面初始化:<br>CloudManager.getInstance().init(this); 并实现CloudListener，添加如下2个方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">// 获取到搜索结果后添加标记</span><br><span class="line">public void onGetSearchResult(CloudSearchResult result, int error) &#123;</span><br><span class="line">	try &#123;</span><br><span class="line">        //可选清空地图，我这里要加标注</span><br><span class="line">		mBaiduMap.clear();</span><br><span class="line">        //result里面封装了一系列的point的list</span><br><span class="line">		if (result != null &amp;&amp; result.poiList != null&amp;&amp; result.poiList.size() &gt; 0) &#123;</span><br><span class="line">        //这里我的数据库里有2种类型的点，所以创建了2类图片标注</span><br><span class="line">		BitmapDescriptor bd1 = BitmapDescriptorFactory.fromResource(R.drawable.icon_marka);</span><br><span class="line">		BitmapDescriptor bd2 = BitmapDescriptorFactory.fromResource(R.drawable.icon_markb);</span><br><span class="line">		LatLng ll;</span><br><span class="line">		LatLngBounds.Builder builder = new LatLngBounds.Builder();</span><br><span class="line">        //这里我是定义了一个全局变量的数组存放标注的点</span><br><span class="line">		markerx = new Marker[result.poiList.size()];</span><br><span class="line">		for (int i = 0; i &lt; result.poiList.size(); i++) &#123;</span><br><span class="line">            //如果你不需要这些功能，直接从这里取数据就可以了</span><br><span class="line">			CloudPoiInfo cloudPoiInfo = result.poiList.get(i);</span><br><span class="line">            //这是我定义的一个实体类，和我的数据库相对应</span><br><span class="line">			Enerty enerty = new Enerty(</span><br><span class="line">cloudPoiInfo.title,cloudPoiInfo.address, cloudPoiInfo.latitude,cloudPoiInfo.longitude);</span><br><span class="line">            //这里是表格里面自定义属性的用法</span><br><span class="line">			Map&lt;String, Object&gt; map = cloudPoiInfo.extras;</span><br><span class="line">			enerty.setPerson((String) map.get(&quot;person&quot;));</span><br><span class="line">			enerty.setPhone((String) map.get(&quot;phone&quot;));</span><br><span class="line">			String typeString = (String) map.get(&quot;types&quot;);</span><br><span class="line">			enerty.setType(typeString);</span><br><span class="line">			enertyArrayList.add(enerty);</span><br><span class="line">			ll = new LatLng(cloudPoiInfo.latitude,cloudPoiInfo.longitude);</span><br><span class="line">			OverlayOptions oo;</span><br><span class="line">			if (typeString.equals(&quot;1&quot;)) &#123;</span><br><span class="line">				oo = new MarkerOptions().icon(bd1).position(ll);</span><br><span class="line">			  &#125; else &#123;</span><br><span class="line">				oo = new MarkerOptions().icon(bd2).position(ll);</span><br><span class="line">			  &#125;</span><br><span class="line">            //这里给数组赋值</span><br><span class="line">			markerx[i] = (Marker) mBaiduMap.addOverlay(oo);</span><br><span class="line">			builder.include(ll);</span><br><span class="line">			  &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">			//添加圆，是指标记一个范围，如附近200米</span><br><span class="line">			LatLng llCircle = new LatLng(location.getLatitude(),</span><br><span class="line">						location.getLongitude());</span><br><span class="line">			OverlayOptions ooCircle = new CircleOptions().fillColor(0x3054FF9F)</span><br><span class="line">			.center(llCircle).stroke(new Stroke(5, 0x3033cccc))</span><br><span class="line">			.radius(1200);</span><br><span class="line">                        //给地图添加标注点</span><br><span class="line">			mBaiduMap.addOverlay(ooCircle);</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">public void onGetDetailSearchResult(DetailSearchResult result, int error) &#123;</span><br><span class="line">        if (result != null) &#123;</span><br><span class="line">	       if (result.poiInfo != null) &#123;		</span><br><span class="line">	           Toast.makeText(MapActivity.this,result.poiInfo.title,Toast.LENGTH_SHORT).show();</span><br><span class="line">	       &#125; else &#123;</span><br><span class="line">	           Toast.makeText(MapActivity.this, &quot;status:&quot;+error,Toast.LENGTH_SHORT).show();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>把点添加到地图上之后就可以点击了，点击弹出一个popwindow显示简介，点击popwindow跳到详情页；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">// 点击标注弹出layout，点击layout的事件</span><br><span class="line">mBaiduMap.setOnMarkerClickListener(new BaiduMap.OnMarkerClickListener() &#123;</span><br><span class="line"></span><br><span class="line">			@Override</span><br><span class="line">			public boolean onMarkerClick(final Marker marker2) &#123;</span><br><span class="line">				Button button = new Button(MapActivity.this);</span><br><span class="line">				button.setBackgroundResource(R.drawable.popmap);</span><br><span class="line">				InfoWindow.OnInfoWindowClickListener listener = null;</span><br><span class="line">				for (int i = 0; i &lt; markerx.length; i++) &#123;</span><br><span class="line">					if (marker2 == markerx[i]) &#123;</span><br><span class="line">						button.setText(enertyArrayList.get(i).getName());</span><br><span class="line">						p = i;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				listener = new InfoWindow.OnInfoWindowClickListener() &#123;</span><br><span class="line">					public void onInfoWindowClick() &#123;</span><br><span class="line">						mBaiduMap.hideInfoWindow();</span><br><span class="line">						Intent intent = new Intent(MapActivity.this,</span><br><span class="line">								DetailActivity.class);</span><br><span class="line">						intent.putExtra(&quot;p&quot;, enertyArrayList.get(p));</span><br><span class="line">						if (DEBUG) &#123;</span><br><span class="line">							intent.putExtra(&quot;lat&quot;, 35.425289528306);</span><br><span class="line">							intent.putExtra(&quot;lon&quot;, 116.60377473566);</span><br><span class="line">						&#125; else &#123;</span><br><span class="line">							intent.putExtra(&quot;lat&quot;,location.getLatitude());</span><br><span class="line">							intent.putExtra(&quot;lon&quot;,location.getLongitude());</span><br><span class="line">						&#125;</span><br><span class="line">						startActivity(intent);</span><br><span class="line">						AnimUtil.animToSlide(MapActivity.this);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;;</span><br><span class="line">				LatLng ll = marker2.getPosition();</span><br><span class="line">				mInfoWindow = new InfoWindow(BitmapDescriptorFactory</span><br><span class="line">						.fromView(button), ll, -47, listener);</span><br><span class="line">				mBaiduMap.showInfoWindow(mInfoWindow);</span><br><span class="line">				return true;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br></pre></td></tr></table></figure></p>
<p>至于详情页的显示那就是全景图和导航的一些API了，这里还有一些我刚开始用到的一些方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">    //构建测试数据，浮点数的格式化，随机数</span><br><span class="line">    ArrayList&lt;Enerty&gt; initData() &#123;</span><br><span class="line">    ArrayList&lt;Enerty&gt; enertyArrayList = new ArrayList&lt;Enerty&gt;();</span><br><span class="line">    Random rd1;</span><br><span class="line">    BigDecimal temp1, temp2, lat, lon;</span><br><span class="line">        if (enertyArrayList.size() == 0) &#123;</span><br><span class="line">            for (int i = 0; i &lt; 10; i++) &#123;</span><br><span class="line">                temp1 = new BigDecimal(rd1.nextDouble() * 0.05 + 36.651216);</span><br><span class="line">                lat = temp1.setScale(6, RoundingMode.DOWN);</span><br><span class="line">                temp2 = new BigDecimal(rd1.nextDouble() * 0.1 + 117.081125);</span><br><span class="line">                lon = temp2.setScale(6, RoundingMode.DOWN);</span><br><span class="line">                Enerty enerty1 = new Enerty(&quot;辰欣药&quot; + i, &quot;环城路&quot; + i, lat.doubleValue(), lon.doubleValue());</span><br><span class="line">                enertyArrayList.add(enerty1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return enertyArrayList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  //添加一个标记返回一个marker   </span><br><span class="line">  public void setMarkers() &#123;</span><br><span class="line">        LatLng point = new LatLng(39.963175, 116.400244);</span><br><span class="line">        //构建Marker图标</span><br><span class="line">        BitmapDescriptor bitmap = BitmapDescriptorFactory.fromResource(R.mipmap.ic_launcher);</span><br><span class="line">        //构建MarkerOption，用于在地图上添加Marker</span><br><span class="line">        OverlayOptions options = new MarkerOptions()</span><br><span class="line">                .position(point)  //设置marker的位置</span><br><span class="line">                .icon(bitmap)  //设置marker图标</span><br><span class="line">                .zIndex(9)  //设置marker所在层级</span><br><span class="line">                .draggable(true);  //设置手势拖拽</span><br><span class="line">        //将marker添加到地图上</span><br><span class="line">        Marker marker = (Marker)(mBaiduMap.addOverlay(options));</span><br><span class="line"></span><br><span class="line">        //调用BaiduMap对象的setOnMarkerDragListener方法设置marker拖拽的监听</span><br><span class="line">        mBaiduMap.setOnMarkerDragListener(new BaiduMap.OnMarkerDragListener() &#123;</span><br><span class="line">            public void onMarkerDrag(Marker marker) &#123;</span><br><span class="line">                //拖拽中</span><br><span class="line">            &#125;</span><br><span class="line">            public void onMarkerDragEnd(Marker marker) &#123;</span><br><span class="line">                //拖拽结束</span><br><span class="line">            &#125;</span><br><span class="line">            public void onMarkerDragStart(Marker marker) &#123;</span><br><span class="line">                //开始拖拽</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">｝</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>研究第三方的SDK出了问题怎么办，去论坛发帖，搜索相关内容，加群；<br>由于版本更新导致很多问题，不要在意新旧版本，能用就行；<br>文档和demo中的代码不一致，以代码为主；<br>不要把诸多测试样例放一起；<br>百度提供了混淆的相关配置写法；</p>
</blockquote>
<p>一种直接用android操作excel的方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">public class BdCodingActivity extends Activity implements OnGetGeoCoderResultListener &#123;</span><br><span class="line"></span><br><span class="line">	GeoCoder mSearch;</span><br><span class="line">	TextView tv_code;</span><br><span class="line">	Button bt_uploadpois;</span><br><span class="line">	int totalCount;</span><br><span class="line">	Timer timer = new Timer(true);</span><br><span class="line">	Workbook wb;</span><br><span class="line">	WritableWorkbook wbook;</span><br><span class="line">	Sheet readSheet;</span><br><span class="line">	WritableSheet writeSheet;</span><br><span class="line">	</span><br><span class="line">	@Override</span><br><span class="line">	protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">		SDKInitializer.initialize(getApplicationContext());</span><br><span class="line">		super.onCreate(savedInstanceState);</span><br><span class="line">		setContentView(R.layout.activity_bdcoding);</span><br><span class="line"></span><br><span class="line">		tv_code = (TextView) findViewById(R.id.tv_bdcode);</span><br><span class="line">		bt_uploadpois = (Button) findViewById(R.id.bt_uploadpois);</span><br><span class="line">		</span><br><span class="line">		mSearch = GeoCoder.newInstance();</span><br><span class="line">		mSearch.setOnGetGeoCodeResultListener(this);</span><br><span class="line">		</span><br><span class="line">		try &#123;</span><br><span class="line">			File dataFile = new File(Environment.getExternalStorageDirectory().getPath() + &quot;/hrss_data.xls&quot;);</span><br><span class="line">			wb = Workbook.getWorkbook(dataFile);</span><br><span class="line">			readSheet = wb.getSheet(0);</span><br><span class="line">			totalCount = readSheet.getRows();</span><br><span class="line">			wbook = Workbook.createWorkbook(dataFile, wb);</span><br><span class="line">			writeSheet = wbook.getSheet(0);</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			tv_code.setText(&quot;获取xls文件异常，&quot; + e.getMessage());</span><br><span class="line">			return;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	int i = 0;</span><br><span class="line">	</span><br><span class="line">	public void gainGeoCode(View v) &#123;</span><br><span class="line">		timer.schedule(new TimerTask() &#123;</span><br><span class="line">			@Override</span><br><span class="line">			public void run() &#123;</span><br><span class="line">				String address = readSheet.getCell(1, i).getContents();</span><br><span class="line">				if(TextUtils.isEmpty(address))&#123;</span><br><span class="line">					address = readSheet.getCell(0, i).getContents();</span><br><span class="line">				&#125;</span><br><span class="line">				mSearch.geocode(new GeoCodeOption().city(&quot;威海&quot;).address(address));</span><br><span class="line">				i ++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, 1000, 1000);//开启服务1秒后启动线程，并且每两秒循环一次</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	@Override</span><br><span class="line">	protected void onDestroy() &#123;</span><br><span class="line">		mSearch.destroy();</span><br><span class="line">		super.onDestroy();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void onGetGeoCodeResult(GeoCodeResult result) &#123;</span><br><span class="line">		if (result == null || result.error != SearchResult.ERRORNO.NO_ERROR) &#123;</span><br><span class="line">			tv_code.setText(&quot;第&quot; + i + &quot;条未能找到结果&quot;);</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">			String strInfo = String.format(&quot;纬度：%f 经度：%f&quot;, result.getLocation().latitude, result.getLocation().longitude);</span><br><span class="line">			tv_code.setText(&quot;第&quot; + i + &quot;条，&quot; + strInfo);</span><br><span class="line">			try &#123;</span><br><span class="line">				writeSheet.addCell(new Label(2, i - 1, String.valueOf(result.getLocation().longitude)));</span><br><span class="line">				writeSheet.addCell(new Label(3, i - 1, String.valueOf(result.getLocation().latitude)));</span><br><span class="line">			&#125; catch (Exception e) &#123;</span><br><span class="line">				tv_code.setText(&quot;写excel异常&quot; + e.getMessage());</span><br><span class="line">			&#125;  </span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		if(i == totalCount)&#123;</span><br><span class="line">			try &#123;</span><br><span class="line">				wbook.write();</span><br><span class="line">				wbook.close();</span><br><span class="line">			&#125; catch (Exception e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			timer.cancel();</span><br><span class="line">			bt_uploadpois.setVisibility(View.VISIBLE);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void onGetReverseGeoCodeResult(ReverseGeoCodeResult result) &#123;</span><br><span class="line">		if (result == null || result.error != SearchResult.ERRORNO.NO_ERROR) &#123;</span><br><span class="line">			Log.w(&quot;BAIDU&quot;, &quot;抱歉，未能找到结果&quot;);</span><br><span class="line">			return;</span><br><span class="line">		&#125;</span><br><span class="line">		Log.v(&quot;BAIDU&quot;, result.getAddress());</span><br><span class="line">		tv_code.setText(result.getAddress());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/28/百度地图API/" data-id="cjajd03pt000jdwll42hzjmtk" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/11/28/监听GPS和网络的广播/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/11/28/2月来学习总结/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/11/28/Android从细节提升用户体验/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/11/28/Html和Android简单对比/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/11/28/Mac配置ADB/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>